---
title: 项目介绍
description: 主要是整理一下怎么介绍我的一些项目
tags:
  - 项目介绍
  - Java
categories:
  - 面试
mathjax: true
password: zhimazhimagogogo
theme: xray
abbrlink: project-introduce
published: 2025-03-18 19:30:44

---

# 项目介绍

## 即时通信项目

### 假设面试官：请挑选一个对你来说比较重要的项目，介绍一下你做了什么。

其实这个项目我还没有做完，没想到部门约面试约这么快来着，目前刚好做到ws发消息，但是还没有特别处理好消息的逻辑。我简单介绍一下这个项目，主要是通过ws建立连接，然后通过前端不断发送心跳来证明活跃状态，后端在第一次连接的时候保存对应的Channel，如果前端heart beat一直在维护，那么后端就会一直通过这个channel和前端通信。如果heart beat超时，也就是我们初始设定的IdleStateHandler设定的readerIdleTime，那么就会触发我们定义的超时事件处理，删除保存的channel，然后将未发送的数据保存到数据库里，在下一次获取到ws连接的时候全部传输过去。使用ws进行消息传输，主要的工作还是在于自己定义好消息类型，然后前端完成对应消息的解析，以及对群组的消息的转换。

当然这个任务最难的部分其实还是前端部分，但是由于还是做一个学习型练手的项目，所以我还是使用了这个项目提供的一个前端，主要是对着接口文档实现后端，一般的什么api还是使用apipost去测试。

除了ws相关的部分，其余部分也是属于比较基础的注册、登陆、联系人添加等等比较简单的crud操作。

### 我看你项目中说用到了SpringSecurity来做安全验证，你是做了什么

其实我一开始是没打算用SpringSecurity来进行权限校验的，一开始只是为了图省事调用一下它的PassWordEncoder，然后发现只要是加入了坐标配置了Config就会默认开始拦截嘛，在最开始的时候我是直接全部放行了，然后自己写一个拦截器来进行token的以及自动续token、续心跳这些操作嘛，但是后来想了一下，感觉也可以尝试用一下一些比较成熟的框架，然后就尝试开始使用SpringSecurity，主要其实是用它做了一个用户登陆的校验，因为他是类似于多个过滤器一样的流式处理嘛，主要是需要实现一个他自己需要的UserDetails类，然后还需要重新实现一个UserDetailsService类，重写一下loadUserByUsername方法，查看用户在不在库里，同时把密码放到UserDetail里嘛，然后在LoginController里就可以调用注册的AuthenticationManager方法来进行身份验证。

### 项目里还用到了Redis，主要是在哪些场景里应用

在最基础的部分的话，首先还是存token、heart_beat、验证吗UUID对应的结果这些有过期时间的属性。

作为缓存方面，用的主要还是用来保存用户的联系人列表，因为这个在后端用的比较多，首先是用户Login的时候要给他返回一次，然后在第一次ws建立的时候也需要给用户发送对应的联系人历史消息。这个模块其实我实现的也不是特别好，因为用户在登录的时候可以增加删除联系人，所以这个数据在缓存中的变化还是比较多的。所以基本我们就是增删联系人之后我们都是直接把缓存里用户Key对应的联系人列表直接删除。

### 你的项目用到了Redis，介绍一下Redis两种持久化方式

一种是AOF，一种是RDB。

AOF就是日志式的记录用户的每一条命令，然后数据恢复的时候通过逐条执行命令来恢复数据。Redis会先执行命令，如果命令执行成功，就把命令加到AOF日志里。但是这样也就带来执行成功但是服务器宕机，数据就会丢失。而且AOF是顶级的顾前不顾后，只要前面的执行完，后面就会写AOF日志，会让后面的请求无法执行。

当AOF文件过大的时候，就会执行AOF重写操作，读取当前数据库的所有key_value，然后用一条命令加到新的AOF里，等全部记录完之后就会用新的AOF替换掉旧的AOF。

RDB快照则是关注当前的数据，不关注操作日志。

###  你是怎么实现数据一致性的

主要还是写完数据库之后删缓存，可能会带来短暂的不一致，但是最终是一致的。
